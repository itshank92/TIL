### 데이터 링크 계층 기본 정보

* 허브나 컴퓨터와 같은 네트워크 장비(노드)간에 신호를 주고 받는 규칙을 정하는 계층으로 가장 많이 사용되는 규칙은 바로 **이더넷**이다.

* 허브의 경우 여러 컴퓨터가 동시에 데이터를 전송하는 경우 데이터가 부딪히는 **충돌**이라는 현상이 발생한다.
  * 충돌이 영향을 미치는 네트워크 범위를 **충돌 도메인**이라고 한다. 
  * 데이터가 전송되는 회선에 연결된 노드들은 하나의 충돌 도메인에 포함된다.
* 이를 피하기 위해 데이터를 보내는 시점을 인위적으로 늦추는 방법인 **CSMA/CD**를 사용한다.
* CSMA/CD 방법을 통해, 현재 전송중인 데이터가 있는지, 충돌이 발생했는지 확인하고 난 다음, 데이터를 송신 작업이 이뤄진다. 
* 하지만 현재는 CSMA/CD 방식이 아닌 **스위치**라는 네트워크 장비를 통해서 이러한 충돌 문제를 해결한다.

​    



### 데이터 링크 계층에서 붙는 정보

* 데이터 링크 계층을 통과하는 데이터는 **이더넷 헤더**와 트레일러가 붙는다.
  * 이렇게 **이더넷 헤더**와 트레일러가 붙은 데이터를 **프레임**이라고 한다.
* 이더넷 헤드의 구성 요소: **목적지 MAC 주소**, **출발지 MAC 주소**, 유형
  * **MAC주소**: 랜카드에 부여되는 주소(48비트)로 전세계적으로 고유한 값을 가진다.
  * **(이더넷)유형**: 이더넷으로 전송되는 상위 계층 **프로토콜의 종류를 식별하는 번호 정보**가 들어간다.

* **트레일러(FCS)**: 데이터 전송 도중 오류가 발생하는지 확인하는 용도로 사용된다.

* 송신 네트워크의 허브는 모든 노드들에게 송신받은 데이터를 보내지만, 각 노드들을 이더넷헤더의 MAC정보를 확인하여 자신과 다른 경우 해당 정보를 파기한다. 

   



### 스위치

* **데이터 링크 계층**에서 동작하며, **레이어 2스위치** 또는 **스위칭 허브**라고 불린다.
* 스위치 내부에는 **MAC주소 테이블**이 존재한다.
  * MAC 주소 테이블: **스위치의 포트번호** + 해당 포트에 연결되어 있는 컴퓨터(들)의 MAC주소
  * 이후 배우는 라우터의 라우팅 테이블은 IP주소 정보가 담겨있다.
  * 스위치는 자신을 거쳐 출발하는 데이터의 이더넷 헤더를 통해 MAC주소 테이블을 자동 생성 및 수정한다. 

* 스위치의 MAC 주소테이블에 아직 등록되지 않은 노드로 전달되는 데이터의 경우 마치 허브와 같이 모든 노드들에게 전달된다. (이더넷 헤더의 MAC 주소 확인을 통해 해당 주소가 다른 노드들을 데이터를 파기한다.)

  ▶ 이를 **플러딩(flooding)**이라고 부른다. 

​    



### 스위치와 허브의 차이점

* **전이중 통신 방식**: 데이터의 송수신을 각각의 독립된 회선을 통해 통신하는 방식

* **반이중 통신 방식**: 회선 하나로 송신과 수신을 번갈아가면서 통신하는 방식
  * 송신 데이터가 동시에 회선으로 들어가는 경우 충돌이 발생한다. 

* **허브**의 경우 송수신을 위한 회선이 하나이기 때문에 반이중 통신방식을 사용한다.
* **스위치**는 송신과 수신을 위한 회선이 구분되어 있기 때문에 전이중 통신방식을 사용한다.

* 허브에서 충돌이 발생할 경우, 모든 노드들은 하나의 회선에 연결되어 있기 때문에 충돌 도메인은 해당 허브와 연결된 모든 노드들이 된다.
* 하지만 스위치에서 충돌이 발생할 경우, 해당 컴퓨터(노드)만 충돌 도메인이 된다



​    



### ARP

* 도착지의 IP주소만 알고 있고 MAC주소를 모르는 경우 IP주소를 이용해서 MAC주소를 알아내는 방식이다.

* 목적지 컴퓨터의 IP주소를 이용해서 해당 네트워크에 MAC주소를 요청한다. 

* 이 요청은 **브로드캐스트** 방식으로 수행된다

* ARP 요청을 받은 네트워크는 요청받은 IP주소에 해당하는 MAC주소를 응답한다

  