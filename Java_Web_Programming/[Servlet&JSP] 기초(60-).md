60

태그 라이브러리와 JSTL에 대해 자세히 알아보자.



JSP에서 사용할 수 있는 태그 라이브러리는 여러가지가 있는데, 그 중 가장 기본이 되는 것이 JSTL이다.

JSTL은 JSP Standard Tag Library로 이름에서부터 기준이 되는 태그 라이브러리임을 알 수 있다. 



JSTL은 크게 5가지 종류의 태그를 제공한다.

Core

* 태그를 통해 어떤 행위(반복문 등등)을 하는 라이브러리 (제어(control)와 관련된 라이브러리)

  ![image-20210811153533984]([Servlet&JSP] 기초(60-).assets/image-20210811153533984.png)

  

Formating

* 태그를 통해 어떤 특정한 양식의 출력을 하고자 할 때 사용하는 라이브러리

  

Functions

* EL을 통해 사용하려는 데이터를 가지고 왔을 때, 해당 데이터를 쓰기 위해 약간의 전처리가 필요한 경우 전처리를 위해 사용하는 라이브러리 (전처리를 할 수 있는 함수들이 묶여있는 라이브러리) 



SQL

* SQL문을 사용할 수 있게 하는 라이브러리
* MVC 관점에서는 사용하지 않는 것이 바람직하다. (View단에서 로직을 처리하는 것을 피해야 한다.)

  

XML

* XML문을 사용할 수 있게 하는 라이브러리
* MVC 관점에서는 사용하지 않는 것이 바람직하다. (View단에서 로직을 처리하는 것을 피해야 한다.)

   

  

> #### 태그에서의 접두사(prefix)와 URI를 사용하는 이유

* 접두사를 사용함으로서 JSP에게 해당 태그가 HTML 태그가 아니라 JSTL 태그임을 알려줄 수 있게 된다. 

* JSP가 태그의 접두사를 통해 해당 태그가 JSTL임을 알게 되었다면, 그 태그의 의미는 URI로 설정된 링크를 통해 파악한다.

  

> #### 사용자 지정 태그를 만드는 과정

1) TagSupport라는 클래스를 상속받아서 태그를 생성한다.

* 예를 들면  TagSupport를 상속받는 ForTag.java라는 파일을 만든다.   

* 생성한 파일에서는 태그의 작동 과정을 코드로 작성할 수 있는데, 이 때, 태그의 시작, 중간, 끝 지점을 설정해서 각각 어떤 작동을 할지 작성할 수 있다. 

  * `doStartTag()` : 태그가 시작되고 나서 작동하는 코드
  * `doAfterBody()` : 태그가 시작되고 HTML코드가 모두 읽힌 다음 작동하는 코드
  * `doEndTag()` : 태그가 끝나고 나서 작동하는 코드

  ![image-20210811160930859]([Servlet&JSP] 기초(60-).assets/image-20210811160930859.png)

  

  

2) 만든 태그를 설명하는 파일인 태그 Descriptor 파일을 만든다.

* 우리가 만든 ForTag.java파일이 새로운 태그임을 등록하는 파일이다. 

* 내용은 아래와 같이 작성한다.

  ![image-20210811154333607]([Servlet&JSP] 기초(60-).assets/image-20210811154333607.png)

  * 태그 Descriptor 파일 내의 uri는 해당 태그의 식별자 역할을 한다고 이해하면 된다.
  * 즉, 전 세계의 수 많은 For 태그 중에 여기서 사용하는 For태그는 해당 uri의 For 태그임을 명시하는 것이다. 

  

* 이렇게 작성한 파일은 WEB-INF 디렉토리 안에 파일명.tld로 저장한다. 

